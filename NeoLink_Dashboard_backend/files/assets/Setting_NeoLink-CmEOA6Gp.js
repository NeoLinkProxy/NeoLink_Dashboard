import{d as u,r as o,o as m,c as f,a as n,e as b,t as g,b as k,_ as $}from"./index-CqOu4Sd-.js";const w={class:"main-content"},y={class:"launch-section"},E={class:"launch-box"},N={class:"nl-version"},T=u({__name:"Setting_NeoLink",setup(L){var s=o(`错误信息：
`),i=o(" 一些信息"),r=o(""),v=o("");const l=o(""),d=async()=>{try{i.value=" 正在获取NL版本";const e=await fetch("http://localhost:23104/GetNowUseNLV/",{method:"GET",headers:{"Content-Type":"application/json"}}),a=await e.json();if(e.ok)l.value=a.version||"未知版本",i.value=" 获取NL版本成功";else throw new Error(`HTTP error! status: ${e.status}`)}catch(e){e instanceof Error?s.value+=`获取NL版本失败: ${e.message}。
`:s.value+=`获取NL版本失败: 未知错误。
`,c(e)}},p=async()=>{try{i.value=" 正在获取版本";const e=await fetch("http://localhost:23104/version",{method:"GET",headers:{"Content-Type":"application/json"}}),a=await e.json();if(e.ok)r.value=a.version;else throw new Error(`HTTP error! status: ${e.status}`)}catch(e){e instanceof Error?s.value+=`获取版本失败: ${e.message}。
`:s.value+=`获取版本失败: 未知错误。
`,c(e)}},c=async e=>{try{alert(`发生错误，上报错误中：${e}`);const a=await fetch("http://localhost:23104/error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.message,stack:e.stack,name:e.name,timestamp:new Date().toISOString()})})}catch(a){a instanceof Error?(s.value+=`上报错误失败: ${a.message}。请复制内容并联系管理员
`,s.value+=`详细错误: ${e.message} ${e.stack} ${e.name} ${e.message} ${e.stack} ${e.name}
`):(s.value+="上报错误失败: 未知错误。请复制内容并联系管理员",s.value+=`详细错误: 未知错误 ${e.message} ${e.stack} ${e.name} ${e.message} ${e.stack} ${e.name}
`)}},h=async()=>{try{const e=await fetch("http://localhost:23104/Edition_logs",{method:"GET",headers:{"Content-Type":"application/json"}}),a=await e.json();if(e.ok)v.value=a.Edition_logs;else{let t="";switch(e.status){case 1001:t="操作被取消";break;case 1002:t="已存在";break;case 1003:t="请求的资源不存在";break;case 1004:t="传递的信息不符合规范";break;case 500:t="服务器发生错误";break;default:t=`HTTP error! status: ${e.status}`}throw new Error(t)}}catch(e){e instanceof Error?s.value+=`获取版本日志失败: ${e.message}。等待上报错误。
`:s.value+=`获取版本日志失败: 未知错误。等待上报错误。
`,c(e)}};return m(async()=>{window.appState?.GetIsChinaUser(),h(),p(),d()}),(e,a)=>(k(),f("div",w,[n("div",y,[n("div",E,[a[0]||(a[0]=n("div",{class:"launch-text"},"启动",-1)),n("div",N,g(l.value||"加载中..."),1)])]),a[1]||(a[1]=b('<div class="version-section" data-v-63eab559><div class="version-box" data-v-63eab559><div class="box-title" data-v-63eab559>NeoLink</div><div class="box-content" data-v-63eab559>版本选择</div></div><div class="version-box" data-v-63eab559><div class="box-title" data-v-63eab559>NeoLink</div><div class="box-content" data-v-63eab559>版本设置</div></div></div>',1))]))}}),S=$(T,[["__scopeId","data-v-63eab559"]]);export{S as default};
