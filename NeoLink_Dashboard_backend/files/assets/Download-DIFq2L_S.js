import{d as g,r as i,o as S,c as a,a as s,l as d,u as m,g as L,F as N,m as T,k as p,b as r,t as b,_ as I}from"./index-CqOu4Sd-.js";const _={class:"main-content"},$={class:"download-info"},j={class:"version-info"},C={class:"version-desc"},V={class:"versions-list"},G={key:0,class:"loading"},P={key:1,class:"version-items"},x=["onClick"],H={key:2,class:"no-versions"},B=g({__name:"Download",setup(D){var w=i(""),u=i("");const f=i(""),v=async()=>{try{window.appState?.updateInfo(" 正在获取NL版本");const t=await fetch("http://localhost:23104/GetNowUseNLV/",{method:"GET",headers:{"Content-Type":"application/json"}}),e=await t.json();if(t.ok)f.value=e.version||"未知版本",window.appState?.updateInfo(" 获取NL版本成功");else throw new Error(`HTTP error! status: ${t.status}`)}catch(t){t instanceof Error?window.appState?.appendErrorInfo(`获取NL版本失败: ${t.message}。
`):window.appState?.appendErrorInfo(`获取NL版本失败: 未知错误。
`),p(t)}},k=async()=>{try{window.appState?.updateInfo(" 正在获取版本");const t=await fetch("http://localhost:23104/version",{method:"GET",headers:{"Content-Type":"application/json"}}),e=await t.json();if(t.ok)w.value=e.version;else throw new Error(`HTTP error! status: ${t.status}`)}catch(t){t instanceof Error?window.appState?.appendErrorInfo(`获取版本失败: ${t.message}。
`):window.appState?.appendErrorInfo(`获取版本失败: 未知错误。
`),p(t)}},l=i([]),c=i(!0),h=async()=>{try{c.value=!0,window.appState?.updateInfo(" 正在获取支持的版本列表");const t=await fetch("http://localhost:23104/GetSupportedVersions/",{method:"GET",headers:{"Content-Type":"application/json"}}),e=await t.json();if(t.ok)l.value=e.VersionsList||[],window.appState?.updateInfo(" 获取支持的版本列表成功");else throw new Error(`HTTP error! status: ${t.status}`)}catch(t){t instanceof Error?window.appState?.appendErrorInfo(`获取支持的版本列表失败: ${t.message}。
`):window.appState?.appendErrorInfo(`获取支持的版本列表失败: 未知错误。
`),p(t)}finally{c.value=!1}},E=async()=>{try{const t=await fetch("http://localhost:23104/Edition_logs",{method:"GET",headers:{"Content-Type":"application/json"}}),e=await t.json();if(t.ok)u.value=e.Edition_logs;else{let o="";switch(t.status){case 1001:o="操作被取消";break;case 1002:o="已存在";break;case 1003:o="请求的资源不存在";break;case 1004:o="传递的信息不符合规范";break;case 500:o="服务器发生错误";break;default:o=`HTTP error! status: ${t.status}`}throw new Error(o)}}catch(t){t instanceof Error?window.appState?.appendErrorInfo(`获取版本日志失败: ${t.message}。等待上报错误。
`):window.appState?.appendErrorInfo(`获取版本日志失败: 未知错误。等待上报错误。
`),p(t)}},y=async t=>{try{const e=await fetch("http://localhost:23104/DownloadNeoLink/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})}),o=await e.json();if(e.ok)console.log(o);else{let n="";switch(e.status){case 1001:n="操作被取消";break;case 1002:n="已存在";break;case 1003:n="请求的资源不存在";break;case 1004:n="传递的信息不符合规范";break;case 500:n="服务器发生错误";break;default:n=`HTTP error! status: ${e.status}`}throw new Error(n)}}catch(e){e instanceof Error?window.appState?.appendErrorInfo(`获取版本日志失败: ${e.message}。等待上报错误。
`):window.appState?.appendErrorInfo(`获取版本日志失败: 未知错误。等待上报错误。
`),p(e)}};return S(async()=>{window.appState?.GetIsChinaUser(),E(),k(),v(),h()}),(t,e)=>(r(),a("div",_,[s("div",$,[s("div",j,[e[8]||(e[8]=s("div",{class:"version-title"},"NeoLink",-1)),s("div",C,[e[1]||(e[1]=d("一款内网穿透软件，专为 Minecraft 联机 / Server 而生。",-1)),e[2]||(e[2]=s("br",null,null,-1)),e[3]||(e[3]=d(" NeoLink下载地址：",-1)),s("div",{style:{display:"inline"},onClick:e[0]||(e[0]=o=>m(L)("https://github.com/NeoLinkProxy/NeoLink"))},"https://github.com/NeoLinkProxy/NeoLink"),e[4]||(e[4]=s("br",null,null,-1)),e[5]||(e[5]=d(" 本GUI支持的版本：NeoLink >= 3.2",-1)),e[6]||(e[6]=s("br",null,null,-1)),e[7]||(e[7]=d(" 提示：官方服务器提供的序列号付费，但是带宽较多（免费的流量用完就结束了） ",-1))])]),s("div",V,[e[9]||(e[9]=s("div",{class:"list-title"},"可用版本列表：",-1)),c.value?(r(),a("div",G," 加载中... ")):l.value.length>0?(r(),a("div",P,[(r(!0),a(N,null,T(l.value,(o,n)=>(r(),a("div",{class:"version-item",onClick:M=>y(o),key:n}," NeoLink 版本 "+b(o),9,x))),128))])):(r(),a("div",H," 暂无可用版本 "))])])]))}}),F=I(B,[["__scopeId","data-v-6a2b365e"]]);export{F as default};
