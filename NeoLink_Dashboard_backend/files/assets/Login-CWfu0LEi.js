import{d as m,r as s,c as v,a as t,w as a,v as u,b as f,e as w,f as g,F as y,u as k,o as x,g as C}from"./index-CQ_8mcTc.js";const V=m({__name:"Login",setup(b){const o=s(""),n=s(""),i=k(),p=async()=>{if(!o.value||!n.value){alert("用户名和密码不能为空");return}try{const l=await fetch("http://localhost:23101/PGP/Login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:o.value,password:n.value})});if(l.ok)alert("登录成功"),i.push("/");else if(l.status===404)alert("用户不存在");else{const e=await l.json();alert(`登录失败: ${e.message||"未知错误"}`)}}catch(l){console.error("登录时发生错误:",l),alert("网络错误，请稍后重试")}};return(l,e)=>{const d=g("router-link");return x(),v(y,null,[e[6]||(e[6]=t("h1",null,"登录",-1)),t("div",null,[a(t("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=r=>o.value=r)},null,512),[[u,o.value]]),e[2]||(e[2]=t("br",null,null,-1)),a(t("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[1]||(e[1]=r=>n.value=r)},null,512),[[u,n.value]]),e[3]||(e[3]=t("br",null,null,-1)),t("button",{onClick:p},"登录")]),t("div",null,[e[5]||(e[5]=t("p",null,"没有用户？",-1)),f(d,{to:"/Create"},{default:w(()=>e[4]||(e[4]=[C("创建用户",-1)])),_:1,__:[4]})])],64)}}});export{V as default};
