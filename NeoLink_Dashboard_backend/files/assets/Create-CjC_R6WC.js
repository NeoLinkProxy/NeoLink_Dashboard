import{d as m,r as s,c as v,a as t,w as a,v as u,b as f,e as w,f as y,F as C,u as g,g as k,o as x}from"./index-CQ_8mcTc.js";const c=m({__name:"Create",setup(b){const l=s(""),r=s(""),p=g(),i=async()=>{if(!l.value||!r.value){alert("用户名和密码不能为空");return}try{const o=await fetch("http://localhost:23101/PGP/CreateUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l.value,password:r.value})});if(o.ok)alert("用户创建成功"),p.push("/Login");else if(o.status===1001)alert("用户名已经存在");else{const e=await o.json();alert(`创建失败: ${e.msg||"未知错误"}`)}}catch(o){console.error("创建用户时发生错误:",o),alert("网络错误，请稍后重试")}};return(o,e)=>{const d=y("router-link");return x(),v(C,null,[e[6]||(e[6]=t("h1",null,"创建用户",-1)),t("div",null,[a(t("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=n=>l.value=n)},null,512),[[u,l.value]]),e[2]||(e[2]=t("br",null,null,-1)),a(t("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n)},null,512),[[u,r.value]]),e[3]||(e[3]=t("br",null,null,-1)),t("button",{onClick:i},"创建")]),t("div",null,[e[5]||(e[5]=t("p",null,"已经有了？",-1)),f(d,{to:"/Login"},{default:w(()=>e[4]||(e[4]=[k("登录",-1)])),_:1,__:[4]})])],64)}}});export{c as default};
